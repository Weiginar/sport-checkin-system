import{_ as U,j as k,o as h,c as B,b as e,w as t,E as H,r as o,i as E,h as I,q as P,z as j,g as w,s as A,v as K,a as z,C as O,t as m}from"./index-3HccLX9U.js";import{j as q}from"./index-B9m2kLEc.js";const L={class:"points-manage"},W={class:"pagination-wrap"},F={__name:"PointsManage",setup(G){const d=E(!1),g=E([]),r=I({userId:"",type:""}),n=I({page:1,pageSize:20,total:0}),f={CHECKIN:{label:"打卡",color:"success"},CONSECUTIVE:{label:"连续打卡",color:"warning"},ACHIEVEMENT:{label:"成就奖励",color:""}},i=async()=>{d.value=!0;try{const u={pageNum:n.page,pageSize:n.pageSize,userId:r.userId||void 0,type:r.type||void 0},p=(await q(u)).data||{};g.value=p.records||[],n.total=p.total||0}catch{H.error("加载积分记录失败")}finally{d.value=!1}},b=()=>{n.page=1,i()};return k(()=>{i()}),(u,l)=>{const p=o("el-input"),_=o("el-form-item"),c=o("el-option"),S=o("el-select"),V=o("el-button"),N=o("el-form"),v=o("el-card"),s=o("el-table-column"),D=o("el-tag"),M=o("el-table"),T=o("el-pagination"),x=P("loading");return h(),B("div",L,[e(v,{shadow:"never",class:"filter-card"},{default:t(()=>[e(N,{inline:!0,onSubmit:j(b,["prevent"])},{default:t(()=>[e(_,{label:"用户ID"},{default:t(()=>[e(p,{modelValue:r.userId,"onUpdate:modelValue":l[0]||(l[0]=a=>r.userId=a),placeholder:"请输入用户ID",clearable:""},null,8,["modelValue"])]),_:1}),e(_,{label:"类型"},{default:t(()=>[e(S,{modelValue:r.type,"onUpdate:modelValue":l[1]||(l[1]=a=>r.type=a),placeholder:"全部",clearable:""},{default:t(()=>[e(c,{label:"全部",value:""}),e(c,{label:"打卡",value:"CHECKIN"}),e(c,{label:"连续打卡",value:"CONSECUTIVE"}),e(c,{label:"成就奖励",value:"ACHIEVEMENT"})]),_:1},8,["modelValue"])]),_:1}),e(_,null,{default:t(()=>[e(V,{type:"primary",onClick:b},{default:t(()=>[...l[4]||(l[4]=[w("搜索",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{shadow:"never",class:"table-card"},{default:t(()=>[A((h(),K(M,{data:g.value,border:"",stripe:""},{default:t(()=>[e(s,{prop:"id",label:"ID",width:"70"}),e(s,{prop:"username",label:"用户名",width:"120"}),e(s,{prop:"nickname",label:"昵称",width:"120"}),e(s,{label:"积分变动",width:"110",align:"center"},{default:t(({row:a})=>[z("span",{style:O({color:a.points>=0?"#67c23a":"#f56c6c",fontWeight:600})},m(a.points>=0?"+":"")+m(a.points),5)]),_:1}),e(s,{label:"类型",width:"120",align:"center"},{default:t(({row:a})=>{var y;return[e(D,{type:((y=f[a.type])==null?void 0:y.color)||"info",size:"small"},{default:t(()=>{var C;return[w(m(((C=f[a.type])==null?void 0:C.label)||a.type),1)]}),_:2},1032,["type"])]}),_:1}),e(s,{prop:"description",label:"描述","min-width":"200","show-overflow-tooltip":""}),e(s,{prop:"createTime",label:"记录时间",width:"170"})]),_:1},8,["data"])),[[x,d.value]]),z("div",W,[e(T,{"current-page":n.page,"onUpdate:currentPage":l[2]||(l[2]=a=>n.page=a),"page-size":n.pageSize,"onUpdate:pageSize":l[3]||(l[3]=a=>n.pageSize=a),"page-sizes":[10,20,50,100],total:n.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:i,onCurrentChange:i},null,8,["current-page","page-size","total"])])]),_:1})])}}},R=U(F,[["__scopeId","data-v-cfb599ac"]]);export{R as default};
