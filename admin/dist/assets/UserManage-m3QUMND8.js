import{_ as E,j as I,o as f,c as j,b as e,w as s,E as v,r as n,i as r,q as K,a as y,d as T,g as x,s as q,v as F,t as L}from"./index-3HccLX9U.js";import{b as P,u as A}from"./index-B9m2kLEc.js";const G={class:"user-manage"},H={class:"search-bar"},J={class:"pagination-wrap"},O={__name:"UserManage",setup(Q){const _=r(""),c=r(""),b=r([]),g=r(!1),h=r(0),u=r(1),m=r(10),p=async()=>{g.value=!0;try{const i={pageNum:u.value,pageSize:m.value,keyword:_.value||void 0,status:c.value!==""?c.value:void 0},o=(await P(i)).data||{};b.value=o.records||[],h.value=o.total||0}catch{v.error("获取用户列表失败")}finally{g.value=!1}},w=()=>{u.value=1,p()},C=async(i,t)=>{const o=t?1:0;try{await A({userId:i.id,status:o}),i.status=o,v.success("状态更新成功")}catch{v.error("状态更新失败")}};return I(()=>{p()}),(i,t)=>{const o=n("el-input"),d=n("el-option"),k=n("el-select"),z=n("el-button"),l=n("el-table-column"),S=n("el-tag"),V=n("el-switch"),U=n("el-table"),D=n("el-pagination"),N=n("el-card"),B=K("loading");return f(),j("div",G,[e(N,{shadow:"never"},{default:s(()=>[y("div",H,[e(o,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=a=>_.value=a),placeholder:"搜索用户名/昵称/手机号",clearable:"",style:{width:"240px"},onKeyup:T(w,["enter"])},null,8,["modelValue"]),e(k,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=a=>c.value=a),placeholder:"用户状态",clearable:"",style:{width:"140px","margin-left":"12px"}},{default:s(()=>[e(d,{label:"全部",value:""}),e(d,{label:"正常",value:1}),e(d,{label:"禁用",value:0})]),_:1},8,["modelValue"]),e(z,{type:"primary",style:{"margin-left":"12px"},onClick:w},{default:s(()=>[...t[4]||(t[4]=[x("搜索",-1)])]),_:1})]),q((f(),F(U,{data:b.value,border:"",stripe:"",style:{width:"100%","margin-top":"16px"}},{default:s(()=>[e(l,{prop:"id",label:"ID",width:"70",align:"center"}),e(l,{prop:"username",label:"用户名","min-width":"120"}),e(l,{prop:"nickname",label:"昵称","min-width":"120"}),e(l,{prop:"phone",label:"手机号",width:"130"}),e(l,{prop:"points",label:"积分",width:"90",align:"center"}),e(l,{prop:"totalCheckins",label:"累计打卡",width:"100",align:"center"}),e(l,{prop:"consecutiveDays",label:"连续天数",width:"100",align:"center"}),e(l,{label:"状态",width:"80",align:"center"},{default:s(({row:a})=>[e(S,{type:a.status===1?"success":"danger",size:"small"},{default:s(()=>[x(L(a.status===1?"正常":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(l,{prop:"createTime",label:"注册时间",width:"170"}),e(l,{label:"操作",width:"100",align:"center",fixed:"right"},{default:s(({row:a})=>[e(V,{"model-value":a.status===1,onChange:M=>C(a,M),"inline-prompt":"","active-text":"启","inactive-text":"禁"},null,8,["model-value","onChange"])]),_:1})]),_:1},8,["data"])),[[B,g.value]]),y("div",J,[e(D,{"current-page":u.value,"onUpdate:currentPage":t[2]||(t[2]=a=>u.value=a),"page-size":m.value,"onUpdate:pageSize":t[3]||(t[3]=a=>m.value=a),total:h.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:p,onCurrentChange:p},null,8,["current-page","page-size","total"])])]),_:1})])}}},X=E(O,[["__scopeId","data-v-b7f2cb42"]]);export{X as default};
