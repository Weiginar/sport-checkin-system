import{_ as w,o as k,c as x,a as f,b as a,w as r,d as V,r as n,u as v,e as _,f as y,l as b,g as h,h as I,E as u,i as N}from"./index-3HccLX9U.js";import{l as z}from"./index-B9m2kLEc.js";const B={class:"login-container"},C={class:"login-card"},E={__name:"Login",setup(L){const g=v(),d=N(!1),o=I({username:"",password:""}),p=async()=>{var i,e;if(!o.username||!o.password){u.error("è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ");return}d.value=!0;try{const s=await z({username:o.username,password:o.password}),t=s.data||s,c=t.token,l=t.user||{};if(l.role!=="ADMIN"){u.error("ä»…ç®¡ç†å‘˜å¯ç™»å½•åŽå°");return}localStorage.setItem("token",c),localStorage.setItem("role",l.role),localStorage.setItem("nickname",l.nickname||"ç®¡ç†å‘˜"),u.success("ç™»å½•æˆåŠŸ"),g.push("/dashboard")}catch(s){u.error(((e=(i=s.response)==null?void 0:i.data)==null?void 0:e.message)||"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯")}finally{d.value=!1}};return(i,e)=>{const s=n("el-input"),t=n("el-form-item"),c=n("el-button"),l=n("el-form");return k(),x("div",B,[f("div",C,[e[3]||(e[3]=f("h2",{class:"login-title"},"ðŸƒ æ‚¦åŠ¨æ‰“å¡ ç®¡ç†åŽå°",-1)),a(l,{model:o,onKeyup:V(p,["enter"])},{default:r(()=>[a(t,null,{default:r(()=>[a(s,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=m=>o.username=m),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å",size:"large","prefix-icon":_(y)},null,8,["modelValue","prefix-icon"])]),_:1}),a(t,null,{default:r(()=>[a(s,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=m=>o.password=m),placeholder:"è¯·è¾“å…¥å¯†ç ",type:"password",size:"large","show-password":"","prefix-icon":_(b)},null,8,["modelValue","prefix-icon"])]),_:1}),a(t,null,{default:r(()=>[a(c,{type:"primary",size:"large",loading:d.value,class:"login-btn",onClick:p},{default:r(()=>[...e[2]||(e[2]=[h(" ç™»å½• ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}},M=w(E,[["__scopeId","data-v-4297bc4a"]]);export{M as default};
